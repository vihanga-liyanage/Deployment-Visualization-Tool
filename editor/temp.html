<html lang="en">
<head>
    <meta charset=UTF-8">
    <title>Test</title>

    <!--Jquery all-->
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>

    <!--Bootstrap-->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" media="screen" />

    <link rel="stylesheet" href="css/wordpress.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />

    <script type="text/javascript" src="js/custom.js"></script>
    <script type="text/javascript" src="js/mxClient.js"></script>
    <script type="text/javascript" src="js/mxApplication.js"></script>

    <script type="text/javascript">
        //Generating sample graph
        var jsonModelPath = "http://localhost:63342/Deployment-Visualization-Tool/editor/model.json";

        var configXMLOriginal =
            '<mxGraphModel>' +
            '<root>' +
            '<Diagram label="My Diagram" href="http://www.jgraph.com/" id="0">' +
            '<mxCell/>' +
            '</Diagram>' +
            '<Layer label="Default Layer" id="1">' +
            '<mxCell parent="0"/>' +
            '</Layer>' +

            '<Image label="" href="" id="2">' +
            '<mxCell style="wso2_identity_server" parent="1" vertex="1">' +
            '<mxGeometry x="60" y="140" width="100" height="100" as="geometry"/>' +
            '</mxCell>' +
            '</Image>' +

            '<Image label="" href="" id="6">' +
            '<mxCell style="wso2_api_manager" parent="1" vertex="1">' +
            '<mxGeometry x="460" y="90" width="100" height="100" as="geometry"/>' +
            '</mxCell>' +
            '</Image>' +
            '<Image label="" href="" id="7">' +
            '<mxCell style="wso2_enterprise_service_bus" parent="1" vertex="1">' +
            '<mxGeometry x="420" y="470" width="100" height="100" as="geometry"/>' +
            '</mxCell>' +
            '</Image>' +
            '<Connector label="Hello" href="" id="8">' +
            '<mxCell parent="1" source="2" target="6" edge="1">' +
            '<mxGeometry relative="1" as="geometry"/>' +
            '</mxCell>' +
            '</Connector>' +
            '<Connector label="" href="" id="9">' +
            '<mxCell parent="1" source="11" target="7" edge="1">' +
            '<mxGeometry relative="1" as="geometry"/>' +
            '</mxCell>' +
            '</Connector>' +
            '<Connector label="" href="" id="10">' +
            '<mxCell edge="1" parent="1" source="7" target="6">' +
            '<mxGeometry relative="1" as="geometry"/>' +
            '</mxCell>' +
            '</Connector>' +
            '<Image label="" href="" id="11">' +
            '<mxCell style="mobile_phone" vertex="1" parent="1">' +
            '<mxGeometry x="249.6666717529297" y="410" width="100" height="100" as="geometry"/>' +
            '</mxCell>' +
            '</Image>' +
            '<Connector label="" href="" id="12">' +
            '<mxCell edge="1" parent="1" source="2" target="11">' +
            '<mxGeometry relative="1" as="geometry">' +
            '<mxPoint x="160" y="190" as="sourcePoint"/>' +
            '<mxPoint x="420" y="520" as="targetPoint"/>' +
            '</mxGeometry>' +
            '</mxCell>' +
            '</Connector>' +
            '<Connector label="" href="" id="13">' +
            '<mxCell edge="1" parent="1" source="11" target="6">' +
            '<mxGeometry relative="1" as="geometry"/>' +
            '</mxCell>' +
            '</Connector>' +
            '</root>' +
            '</mxGraphModel>';

        var configXML =
            '<mxGraphModel>' +
            '<root>' +
            '<Diagram label="My Diagram" href="http://www.jgraph.com/" id="0">' +
            '<mxCell/>' +
            '</Diagram>' +
            '<Layer label="Default Layer" id="1">' +
            '<mxCell parent="0"/>' +
            '</Layer>';

        var imageID = 2, x = 0, y = 0;


        loadJSON(jsonModelPath, function(response) {
            // Parse JSON string into object
            var actual_JSON = JSON.parse(response);
            var services = actual_JSON.services;

            for (i in services) {
                //take each service one by one
                var service = services[i];
                configXML += '<Image label="' + service.name + '" href="" id="' + imageID + '">' +
                    '<mxCell style="' + service.type + '" parent="1" vertex="1">' +
                    '<mxGeometry x="' + x + '" y="' + y + '" width="100" height="100" as="geometry"/>' +
                    '</mxCell>' +
                    '</Image>';
                imageID ++;
                x += 120;
                if (i % 2 == 0) {
                    y += 120;
                }

            }

            document.getElementById('text').innerHTML = configXML;
        });

    </script>

    <style>
        td {
            border: 1px solid;
            padding: 2px;
        }
    </style>
</head>
<body>
    <div id="canvas" style="text-align: left;padding: 20px;font-size: 18px; font-family: 'Open Sans', sans-serif">
        <textarea name="text" id="text" cols="30" rows="10"></textarea>
    </div>
</body>
</html>